.TH NY 1 "" "Nytrix Manual"
.SH NAME
ny \- Nytrix language interpreter and compiler
.SH SYNOPSIS
.B ny
[\fIOPTIONS\fR] [\fIFILE\fR]
.SH DESCRIPTION
The \fBny\fR command is the interpreter and Ahead-of-Time (AOT) compiler for the Nytrix language. It can execute Nytrix source files, inline code, or launch an interactive Read-Eval-Print Loop (REPL). It also provides various options for optimization, debugging, and output control.
.SH OPTIONS
.SS OPTIMIZATION:
.TP
\fB-O1/-O2/-O3\fR
Set the optimization level (default: -O0). Higher levels enable more aggressive optimizations.
.TP
\fB-passes=PIPE\fR
Provide a custom LLVM pass pipeline. For example, 'default<O2>' uses the default optimization passes at level O2.
.SS EXECUTION:
.TP
\fB-run\fR
Execute the compiled Nytrix code using the Just-In-Time (JIT) compiler after compilation. This is implied if no \fB-emit-only\fR or \fB-o\fR option is given and an input file or command string is provided.
.TP
\fB-emit-only\fR
Only emit the compiled Intermediate Representation (IR) or object code; do not execute the program. This is the default behavior if an output file is specified.
.TP
\fB-o [path]\fR, \fB--output=<path>\fR
Emit the compiled executable as an ELF file to the specified \fIpath\fR. If no \fIpath\fR is given, defaults to `a.out`. This option implies \fB-emit-only\fR.
.TP
\fB-strip\fR, \fB--strip\fR
Create a stripped binary, removing symbol table and debugging information.
.TP
\fB-no-strip\fR, \fB--no-strip\fR
Create an unstripped binary, preserving symbol table and debugging information.
.TP
\fB-c <code>\fR
Execute the provided \fIcode\fR string as an inline Nytrix program. This is useful for one-liners or quick tests.
.SS REPL:
.TP
\fB-i\fR, \fB-interactive\fR
Launch an interactive Read-Eval-Print Loop (REPL) with readline support for convenient input and history.
.TP
\fB-repl\fR
Read Nytrix source code from standard input (stdin) as a one-shot execution.
.SS DEBUGGING:
.TP
\fB-v\fR, \fB-verbose\fR
Enable verbose output, showing compilation steps and other informational messages.
.TP
\fB--debug\fR
Enable verbose output (equivalent to \fB-v\fR) and additional debug logs.
.TP
\fB-vv\fR, \fB-vvv\fR
Increase verbosity levels further for more detailed output.
.TP
\fB-time\fR
Show timing information for each phase of the compilation process.
.TP
\fB-dump-ast\fR
Dump the Abstract Syntax Tree (AST) after parsing.
.TP
\fB-dump-llvm\fR
Print the LLVM Intermediate Representation (IR) to standard output.
.TP
\fB-dump-tokens\fR
Dump the lexer tokens generated during the lexical analysis phase.
.TP
\fB-dump-docs\fR
Extract and print function docstrings from the source code.
.TP
\fB-dump-funcs\fR
List all functions compiled during the process.
.TP
\fB-dump-symbols\fR
Show the runtime symbol table.
.TP
\fB-dump-stats\fR
Print compilation statistics.
.TP
\fB-verify\fR
Verify the LLVM module for correctness.
.TP
\fB--dump-on-error\fR
On compilation errors, write the last processed source (`build/debug/last_source.ny`) and LLVM IR (`last_ir.ll`) for debugging purposes.
.TP
\fB-trace\fR
Enable execution tracing for detailed runtime behavior analysis.
.TP
\fB--color=WHEN\fR
Control colored output. \fIWHEN\fR can be `auto` (default, colors if terminal supports it), `always` (force colors), or `never` (disable colors).
.TP
\fB-safe-mode\fR
Enable all available safety checks, potentially impacting performance but increasing robustness.
.SS INFO:
.TP
\fB-h\fR, \fB-help\fR, \fB--help\fR
Display a summary of command-line options and exit.
.TP
\fB-version\fR
Display version information for the Nytrix compiler and exit.
.SH ENVIRONMENT
.TP
\fBNYTRIX_RUN\fR
If set, behaves as if the \fB-run\fR flag was provided.
.TP
\fBNYTRIX_DUMP_TOKENS\fR
If set, behaves as if the \fB-dump-tokens\fR flag was provided during lexing.
.SH EXAMPLES
.TP
\fBny examples/quicksort.ny\fR
Compile and run the `quicksort.ny` Nytrix program.
.TP
\fBny -O2 -run examples/quicksort.ny\fR
Compile and run an optimized version of `quicksort.ny` with optimization level O2.
.TP
\fBny -v -time -verify examples/file.ny\fR
Compile `file.ny` with verbose output, timing information, and LLVM module verification for debugging.
.TP
\fBny -c 'print("Hello from Nytrix!")'\fR
Execute a simple "Hello, World!" program directly from the command line.
.TP
\fBny -i\fR
Start an interactive Nytrix REPL session.
.SH SEE ALSO
.BR nytrix (1)
.SH BUGS
The Nytrix project is still in active development. Expect breaking changes and incomplete features.
.SH LICENSE
See the `LICENSE` file in the source distribution for licensing details.
